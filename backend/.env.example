# =============================================================================
# Coordination Intelligence Platform - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to git - it contains secrets!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME="Coordination Intelligence Platform"
DEBUG=true

# SECRET_KEY: Generate a random secret key for Flask/FastAPI session signing
# Get one by running: python -c "import secrets; print(secrets.token_hex(32))"
# Or use: openssl rand -hex 32
SECRET_KEY=your-secret-key-here

# -----------------------------------------------------------------------------
# SECURITY: Allowed OAuth Redirect URLs
# -----------------------------------------------------------------------------
# IMPORTANT: For security, only these URLs are allowed for OAuth callbacks.
# This prevents open redirect attacks.
#
# Format: Comma-separated list of full URLs
# Example: http://localhost:8000/oauth/callback,https://myapp.com/oauth/callback
#
# You MUST add your ngrok URL here when using ngrok:
# ALLOWED_REDIRECT_URLS=http://localhost:8000/oauth/callback,https://xxxx.ngrok-free.app/oauth/callback
#
# When you restart ngrok and get a new URL, update this and restart the backend
ALLOWED_REDIRECT_URLS=http://localhost:8000/oauth/callback

# -----------------------------------------------------------------------------
# Ngrok (For Local Development with Slack Webhooks)
# -----------------------------------------------------------------------------
# Ngrok creates a public URL that forwards to your local server
# This is REQUIRED for Slack webhooks and OAuth callbacks to work locally
#
# 1. Install ngrok: https://ngrok.com/download
# 2. Sign up for free at https://dashboard.ngrok.com/signup
# 3. Get your authtoken from: https://dashboard.ngrok.com/get-started/your-authtoken
# 4. Set up your static domain: https://dashboard.ngrok.com/domains
#    (This gives you a consistent URL like https://yourapp.ngrok-free.app)
#
# FREE TIER: You get 1 static domain with the free plan
# PAID TIER: Custom domains and more features
#
# After setting up ngrok, copy your public URL (e.g., https://abc123.ngrok-free.app)
# and use it in your Slack app configuration:
# - OAuth Redirect URL: https://abc123.ngrok-free.app/api/oauth/callback
# - Event Subscriptions > Request URL: https://abc123.ngrok-free.app/api/events/slack
#
# Or use ngrok with docker-compose (see docker-compose.override.yml):
# docker-compose -f docker-compose.yml -f docker-compose.override.yml up
#
# NGROK_AUTHTOKEN: Your ngrok authentication token
# Get it from: https://dashboard.ngrok.com/get-started/your-authtoken
NGROK_AUTHTOKEN=your-ngrok-authtoken

# NGROK_DOMAIN: Your static ngrok domain (recommended for consistent URL)
# Set up at: https://dashboard.ngrok.com/domains
# Example: yourapp.ngrok-free.app (without https://)
NGROK_DOMAIN=

# PUBLIC_URL: The full public URL where your app is accessible
# This is used for generating OAuth redirect URLs and webhook callbacks
# For local dev with ngrok: https://your-domain.ngrok-free.app
# For production: https://your-domain.com
PUBLIC_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Slack OAuth Credentials (REQUIRED for OAuth flow)
# -----------------------------------------------------------------------------
# These are found in your Slack App's "Basic Information" page
# https://api.slack.com/apps → Select your app → Basic Information
#
# SLACK_CLIENT_ID: OAuth Client ID
# 1. Go to https://api.slack.com/apps
# 2. Select your app
# 3. Go to "Basic Information"
# 4. Scroll down to "App Credentials"
# 5. Copy "Client ID" (looks like: 1234567890.1234567890)
SLACK_CLIENT_ID=your-slack-client-id

# SLACK_CLIENT_SECRET: OAuth Client Secret
# 1. Same location as Client ID
# 2. Click "Show" next to "Client Secret"
# 3. Copy the secret value
# IMPORTANT: Keep this secret! Never commit it to git!
SLACK_CLIENT_SECRET=your-slack-client-secret

# SLACK_SIGNING_SECRET: Verify incoming requests from Slack
# 1. Go to https://api.slack.com/apps
# 2. Select your app
# 3. Go to "Basic Information" → "Signing Secret"
# 4. Copy the value here
SLACK_SIGNING_SECRET=your-slack-signing-secret

# SLACK_BOT_TOKEN: OAuth token for your bot to send messages
# This is generated AFTER you install the app to a workspace
# 1. Go to https://api.slack.com/apps
# 2. Select your app
# 3. Go to "OAuth & Permissions"
# 4. Copy "Bot User OAuth Token" (starts with xoxb-)
SLACK_BOT_TOKEN=xoxb-your-bot-token

# SLACK_APP_TOKEN: For Socket Mode (optional, for local development)
# 1. Go to https://api.slack.com/apps
# 2. Enable Socket Mode in "Socket Mode" section
# 3. Generate an App-Level Token with connections:write scope
# 4. Copy the token here (starts with xapp-)
SLACK_APP_TOKEN=xapp-your-app-token

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# For local development with SQLite:
# DATABASE_URL=sqlite:///./dev.db
#
# For PostgreSQL (production):
# 1. Install PostgreSQL locally or use a service like Supabase, Railway, AWS RDS
# 2. Create a database
# 3. Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/coordination

# -----------------------------------------------------------------------------
# Redis (Optional - for caching and background tasks)
# -----------------------------------------------------------------------------
# 1. Install Redis locally or use a cloud provider (Upstash, Redis Cloud)
# 2. Get the connection URL
# Format: redis://username:password@host:port or rediss:// for SSL
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# AI Provider API Keys (At least one is required)
# -----------------------------------------------------------------------------
# OPENAI_API_KEY: For GPT-4, GPT-4o-mini models
# 1. Go to https://platform.openai.com/api-keys
# 2. Sign up/login to OpenAI
# 3. Click "Create new secret key"
# 4. Copy the key (starts with sk-)
# Note: You need to add billing information to use the API
OPENAI_API_KEY=sk-your-openai-key

# ANTHROPIC_API_KEY: For Claude models (optional alternative)
# 1. Go to https://console.anthropic.com/
# 2. Sign up/login
# 3. Go to "API Keys" section
# 4. Create a new key (starts with sk-ant-)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# ENCRYPTION_KEY: 32-byte key for encrypting sensitive data
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Must be exactly 32 bytes for Fernet encryption
ENCRYPTION_KEY=your-32-byte-encryption-key

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
